(this["webpackJsonpnantango-react"]=this["webpackJsonpnantango-react"]||[]).push([[0],{112:function(e,n){},114:function(e,n){},127:function(e,n,t){},128:function(e,n,t){},129:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(50),o=t.n(c),i=t(5),u=t(15),s=t(51),l=t(6),m=(t(88),t(16)),f=t.n(m),d=t(28),v=t(8),h=t(52),p=t.n(h),E=t(7),b=t.n(E),g=r.a.createContext({isLoading:!0,quesDict:{},usedChoices:[],setUsedChoices:function(){}}),w=t(107),j=function(e){var n={};return e.forEach((function(e){n[e[0]]||(n[e[0]]=[]),n[e[0]].push({level:e[0],en:e[1].trim(),meanings:[e[2].trim(),e[3].trim()]})})),n},O=function(e){var n=Object(a.useState)(!0),t=Object(v.a)(n,2),c=t[0],o=t[1],i=Object(a.useState)([]),u=Object(v.a)(i,2),s=u[0],l=u[1],m=Object(a.useState)([]),h=Object(v.a)(m,2),E=h[0],b=h[1],O=function(){var e=Object(d.a)(f.a.mark((function e(){var n,t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("./data/data.csv");case 2:200===(n=e.sent).status&&(t=n.request.responseText,a=j(w.parse(t)),b(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.useEffect((function(){Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:o(!1);case 3:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement(g.Provider,{value:{isLoading:c,quesDict:E,usedChoices:s,setUsedChoices:l}},e.children)};function x(){var e=Object(i.a)(["\n  cursor: pointer;\n"]);return x=function(){return e},e}var C=l.a.div(x()),q=function(e){var n=Object(u.d)();return r.a.createElement(C,{className:"level",onClick:function(){n.push("/level-detail/".concat(e.id))}},e.label)},k=function(){var e=function(){var e=r.a.useContext(g);return Object.keys(e.quesDict)}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"start"},"\u306a\u3093\u305f\u3093\u3054"),e.map((function(e){return r.a.createElement(q,{label:"Lv".concat(e),id:e,key:e})})))},y=t(57),N=t(24),D=t(56),M=t.n(D);t(127);function L(){var e=Object(i.a)(["\n  width: 100%;\n  position: absolute;\n  padding: 0 10px;\n  box-sizing: border-box;\n  bottom: 10px;\n"]);return L=function(){return e},e}var A=Number("50"),P=new window.talkify.Html5Player;P.forceLanguage("en"),P.setRate(1);var S=function(e){var n=e.question,t=e.onChoosen;r.a.useEffect((function(){console.log("current q",n.en),P.playText(n.en);var e=setTimeout((function(){t(n,null,5)}),5e3);return function(){clearTimeout(e)}}),[t,n]);var c=Object(a.useMemo)((function(){return Date.now()}),[n]),o=function(){var e=r.a.useContext(g);return[e.usedChoices,e.setUsedChoices]}(),i=Object(v.a)(o,2),u=i[0],s=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"question"},r.a.createElement("p",null,e.question.en)),r.a.createElement("div",{id:"choices"},e.choices.map((function(n,t){return r.a.createElement("div",{className:"choice",style:{pointerEvents:"auto"},key:n+t,onClick:function(){s([].concat(Object(N.a)(u),Object(N.a)(e.choices)));var t=Date.now()-c;e.onChoosen(e.question,n,Math.round(t/1e3)||1)}},n)}))))},F=l.a.div(L()),T=function(){var e=Object(u.e)(),n=function(e){var n=r.a.useContext(g),t=n.quesDict[e],a=t.map((function(e){return e.meanings[1]})),c=n.usedChoices,o=b.a.xor(a,c);return o.length<=3?(n.setUsedChoices([]),{questions:t,choices:a}):{questions:t,choices:o}}(Number(e.id)),t=n.questions,c=n.choices,o=Object(u.d)(),i=r.a.useState(0),s=Object(v.a)(i,2),l=s[0],m=s[1],f=r.a.useMemo((function(){return b.a.take(b.a.shuffle(t),A)}),[t]),d=r.a.useMemo((function(){if(f[l]){var e=b.a.take(b.a.shuffle(c.filter((function(e){return e!==f[l].meanings[1]}))),2);return e.push(f[l].meanings[1]),b.a.shuffle(e)}return[]}),[c,l,f]),h=r.a.useState([]),p=Object(v.a)(h,2),E=p[0],w=p[1],j=r.a.useMemo((function(){return f[l]}),[f,l]),O=Object(a.useCallback)((function(e,n,t){var a=e.meanings[1]===n?5-t:0;w((function(t){return[].concat(Object(N.a)(t),[Object(y.a)({},e,{questionPoints:a,userAnswer:n})])})),m((function(e){return e+1}))}),[]);return r.a.useEffect((function(){l>=A&&o.push("/result",{questionAnswers:E,level:e.id})}),[l,o,E,e]),r.a.createElement("div",{id:"quiz",style:{display:"block"}},j&&r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{question:j,onChoosen:O,choices:d}),r.a.createElement(F,null,r.a.createElement(M.a,{height:10,progress:Math.round(l/A*100),showPercentage:!0}))))};function U(){var e=Object(i.a)(["\n  padding: 5px;\n  margin-left: 20px;\n  .success-message,\n  #review {\n    margin-top: 5px;\n  }\n"]);return U=function(){return e},e}var _=function(e){var n=e.QA;return r.a.createElement("div",{className:"sentence"},r.a.createElement("div",{className:"word_en"},n.en),r.a.createElement("div",{className:"word_ja"},n.meanings[1]),r.a.createElement("div",{className:"word_sound"},n.meanings[0]))},z=l.a.div(U()),B=function(){var e=Object(u.d)().location.state.questionAnswers,n=e.filter((function(e){return e.questionPoints<=0})),t=new Date;return r.a.createElement(z,null,r.a.createElement("div",null,r.a.createElement("h1",null,"\u82f1\u5358\u8a9e\u88dc\u5f37\u30d7\u30ea\u30f3\u30c8"),r.a.createElement("p",null,"\u65e5\u6642\uff1a".concat(t.getFullYear(),"\u5e74").concat(t.getMonth()+1,"\u6708").concat(t.getDate(),"\u65e5")),r.a.createElement("p",null,"\u540d\u524d\uff1a",r.a.createElement("input",{type:"text"})),r.a.createElement("p",null,r.a.createElement("button",{onClick:window.print},"\u5370\u5237"))),n.length>0&&r.a.createElement("div",{id:"review"},n.map((function(e,n){return r.a.createElement(_,{key:n,QA:e})}))),0===n.length&&r.a.createElement("h3",{className:"success-message"},"Congratulations, you are super!"))};function J(){var e=Object(i.a)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  margin: auto;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return J=function(){return e},e}var Q=l.a.div(J()),W=function(){return r.a.createElement(O,null,r.a.createElement(g.Consumer,null,(function(e){return e.isLoading?r.a.createElement(Q,null,r.a.createElement(s.ClipLoader,null)):r.a.createElement(u.a,null,r.a.createElement(u.c,null,r.a.createElement(u.b,{exact:!0,path:"/"},r.a.createElement("div",{id:"container"},r.a.createElement(k,null))),r.a.createElement(u.b,{path:"/level-detail/:id"},r.a.createElement("div",{id:"container"},r.a.createElement(T,null))),r.a.createElement(u.b,{path:"/result"},r.a.createElement(B,null))))})))};t(128),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},59:function(e,n,t){e.exports=t(129)},88:function(e,n,t){}},[[59,1,2]]]);
//# sourceMappingURL=main.589d5ce2.chunk.js.map